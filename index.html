<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap CSS JQUERY -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>Hello, world!</title>
</head>

<body class="m-auto bg-dark">
    <div class="container">
        <div class="row">
            <div class="d-flex flex-column">
                <div class="rounded mx-auto my-3 bg-warning">
                    <h2 class="fw-bold m-auto p-3 text-center">Nöbetçi Eczane Uygulaması</h2>
                </div>
                <div class="d-flex flex-column justify-content-between">
                    <div class="col mx-auto my-2">
                        <input class="rounded border border-danger" type="text" id="ilText" placeholder="  İl Giriniz" />
                    </div>
                    <div class="col mx-auto my-2">
                        <input class="rounded border border-danger" type="text" id="ilceText"
                            placeholder="  İlce Giriniz" />
                    </div>
                    <button class="rounded mx-auto my-2 border-secondary" id="il">Tamam</button>
                    <br>
                    <button class="rounded-pill border border-light bg-danger text-light" id="button1">Nöbetçi Eczaneleri Sırala</button>
                </div>
                <div id="forTable">
                    <table class="table table-striped bg-light rounded my-2 overflow-scroll">
                        <thead>
                          <tr>
                            <th>Eczane İsmi</th>
                          </tr>
                        </thead>
                        <tbody>
                            <!-- ECZANELER -->
                        </tbody>
                      </table>
                </div>
                    
                <ol>
                    <!-- ECZANELER -->
                </ol>
                <div class="mx-auto">
                    <p class="text-light">Nöbetçi eczana sayısı: </p>
                </div>


            </div>
        </div>
    </div>

    <script>

        $(document).ready(function () {
            var pharUrl = "https://api.collectapi.com/health/dutyPharmacy";

            $("#il").click(function (e) {
                $("#ilText").val(function (index, currentvalue) {
                    $("#ilceText").val(function (index, ilce) {
                        pharUrl += "?il=" + currentvalue + "&ilce=" + ilce;
                    });
                });
            });


            $("#button1").click(function () {
                $.ajax({
                    type: "GET",
                    url: pharUrl,
                    dataType: 'json',
                    headers: {
                        "Authorization": "apikey " + "apikey 661a53NS8JW10Xp0tmqNr4:4rsFrfN8VQgHjtTuoV73Vb"
                    },
                    data: { get_param: 'value' },
                    success: function (result) {
                        var i = 0;
                        $.each(result.result, function () {
                            $("tbody").append("<tr><td>"+ this.name + "</td></tr>");
                        })
                        $("p").append(JSON.stringify(result.result.length));
                    }
                });
            });
        });
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</body>

</html>
<!-- 

<div class="vertical-menu">
    <a class="active">Home</a>
    <a>Ankara</a>
    <a>İstanbul</a>
    <a>İzmir</a>
    <a>Link 3</a>
    <a>Link 5</a>
    <a>Link 6</a>
    <a>Link 7</a>
    <a>Link 8</a>
    <a>Link 9</a>
    <a>Link 10</a>
</div>

-->